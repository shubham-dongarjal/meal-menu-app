<div class="signup-auth-wrapper">
  <div class="signup-auth-container">
    <div class="signup-auth-form">
      <div class="signup-form-container">
        <h2 class="signup-form-title">Create Your Account</h2>
        <p class="signup-form-subtitle mb-4">Join our food community</p>

        <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
          <%= render "devise/shared/error_messages", resource: resource %>

          <div class="mb-3">
            <label class="signup-form-label">
              <i class="bi bi-person me-2"></i>Full Name
            </label>
            <%= f.text_field :name, class: "signup-form-control", placeholder: "Your name", autofocus: true %>
          </div>

          <div class="mb-3">
            <label class="signup-form-label">
              <i class="bi bi-envelope me-2"></i>Email Address
            </label>
            <%= f.email_field :email, class: "signup-form-control", placeholder: "your@email.com", autocomplete: "email" %>
          </div>

          <div class="mb-3 position-relative">
            <label class="signup-form-label">
              <i class="bi bi-lock me-2"></i>Password
            </label>
            <%= f.password_field :password, class: "signup-form-control pe-5", id: "password", placeholder: "••••••••", autocomplete: "new-password" %>
            <button type="button" class="signup-password-toggle" id="togglePassword">
              <i class="bi bi-eye"></i>
            </button>
            <% if @minimum_password_length %>
              <small class="text-muted mt-1 d-block"><%= @minimum_password_length %> characters minimum</small>
            <% end %>
          </div>

          <div class="mb-4 position-relative">
            <label class="signup-form-label">
              <i class="bi bi-lock-fill me-2"></i>Confirm Password
            </label>
            <%= f.password_field :password_confirmation, class: "signup-form-control pe-5", id: "password_confirmation", placeholder: "••••••••", autocomplete: "new-password" %>
            <button type="button" class="signup-password-toggle" id="togglePasswordConfirmation">
              <i class="bi bi-eye"></i>
            </button>
          </div>

          <%= f.submit "Sign Up", class: "signup-auth-btn w-100 mb-3" %>

          <div class="text-center mt-4">
            <p class="signup-text">Already have an account? <%= link_to "Sign in", new_session_path(resource_name), class: "signup-link fw-semibold" %></p>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<script>
  function setupPasswordToggle(inputId, buttonId) {
    const password = document.getElementById(inputId);
    const button = document.getElementById(buttonId);

    if (password && button) {
      button.addEventListener('click', function() {
        const icon = this.querySelector('i');
        if (password.type === 'password') {
          password.type = 'text';
          icon.classList.remove('bi-eye');
          icon.classList.add('bi-eye-slash');
        } else {
          password.type = 'password';
          icon.classList.remove('bi-eye-slash');
          icon.classList.add('bi-eye');
        }
      });
    }
  }

  document.addEventListener("DOMContentLoaded", function() {
    setupPasswordToggle('password', 'togglePassword');
    setupPasswordToggle('password_confirmation', 'togglePasswordConfirmation');
  });
</script>

